FORMAT: 1A

# LWS-REST Mock Requests

This document contains mock API requests only.
See real API on [http://docs.lokiserver.apiary.io](http://docs.lokiserver.apiary.io).


# Group System Time Zones
Following resources belong to System Time Zones entity.

## System Time Zones [/api/time-zones]
Represents time zones list resource.

### Retrieve Time Zones list [GET]
Retrieve system Time Zones list.

+ Links
    + self - Self link.

+ Request (application/json)

    + Headers
        Transaction-Id: 1380080943120


+ Response 200 (application/hal+json)

    + Headers
        Transaction-Id: 1380080943120

    + Body

        {
            "_links": {
                "self": {
                    "href": "http://uc.example.com/api/time-zones"
                }
            },
            "serverTimeZone": "America/New_York",
            "timeZones": {
                "America/New_York": {
                    "name": "America/New_York",
                    "displayName": "(GMT-04:00) (US) Eastern Time"
                },
                "America/Montreal": {
                    "name": "America/Montreal",
                    "displayName": "(GMT-04:00) (Canada) Eastern Time"
                }
            }
        }
        

    + Schema

        {
            "title": "Retrieve System time zones",
            "description": "Retrieve System time zones",
            "allOf": [
                {
                    "$ref": "/base#/definitions/HalResponse"
                }, {
                    "required": ["_links"]
                }, {
                    "properties": {
                        "serverTimeZone": {
                            "$ref": "/base#/definitions/TimeZone"
                        },
                        "timeZones": {
                            "type": "object",
                            "patternProperties": {
                                "^.+$" : {
                                    "type": "object",
                                    "additionalProperties": false,
                                    "properties": {
                                        "name": {
                                            "$ref": "/base#/definitions/TimeZone"
                                        },
                                        "displayName": {
                                            "type": "string"
                                        }
                                    },
                                    "required": ["name", "displayName"]
                                }
                            }
                        }
                    },
                    "required": ["serverTimeZone", "timeZones"]
                }
            ]
        }

# Group User Services
Following resources belong to User Services.

## VoIP User’s Call Forwarding Always Settings [/loki/users/{+userId}/services/Call%20Forwarding%20Always]
VoIP User’s Call Forwarding Always Settings

### URI Template Parameters JSON Schema
    {
        "title": "VoIP User resource URI template parameters",
        "description": "VoIP User resource URI template parameters",
        "type": "object",
        "properties": {
            "userId": { "$ref": "/base#/definitions/UserId" }
        },
        "required": ["userId"]
    }
### Retrieve a VoIP User’s Call Forwarding Always service settings [GET]
Retrieve a VoIP User’s Call Forwarding Always service settings

+ Links
    + self - [GET /loki/users/{+userId}/services/Call%20Forwarding%20Always]
    + up - Link to User assigned services [GET /loki/users/{+userId}/services]
    + ls:user - Link to associated User. [GET /loki/users/{+userId}]

+ Request (application/json)

    + Headers
        Transaction-Id: 1380080943120


+ Response 200 (application/hal+json)

    + Headers
        Transaction-Id: 1380080943120

    + Body

        {
            "_links": {
                "self": {
                    "href": "http://lokiserver.apiary.io/loki/users/2005553001%40example.com/services/Call%20Forwarding%Always"
                },
                "up": { "href": "http://lokiserver.apiary.io/loki/users/2005553001%40example.com/services" },
                "ls:user": { "href": "http://lokiserver.apiary.io/loki/users/2005553001%40example.com" }
            },
            "userId": "2005553001@example.com",
            "isActive": true,
            "forwardToPhoneNumber": "2005553002",
            "isRingSplashActive": false
        }

    + Schema

        {
            "title": "Retrieve a VoIP User’s Call Forwarding Always service settings Response",
            "description": "Retrieves a VoIP User’s Call Forwarding Always service settings Response",
            "allOf": [
                { "$ref": "/base#/definitions/HalResponse" },
                { "properties": {
                    "userId": {
                        "$ref": "/base#/definitions/UserId"
                    },
                    "isActive": {
                        "title": "is Active",
                        "description": "Flag that specifies if the service is enabled.",
                        "type": "boolean"
                    },
                    "forwardToPhoneNumber": {
                        "$ref": "/base#/definitions/OutgoingDnOrSipUri"
                    },
                    "isRingSplashActive": {
                        "title": "is Ring Splash Active",
                        "description": "Play Ring Reminder when a call is forwarded.",
                        "type": "boolean"
                    }
                }},
                { "required": ["_links", "userId", "isActive", "forwardToPhoneNumber", "isRingSplashActive"] }
            ]
        }


### Modify VoIP User’s Call Forwarding Always Settings [PUT]
Modify VoIP User’s Call Forwarding Always Settings

+ Request (application/json)

    + Headers
        Transaction-Id: 1380080943120
   
    + Body
 
        {
            "isActive": true,
            "forwardToPhoneNumber": "+1-4151112222",
            "isRingSplashActive": false
        }
        

    + Schema

        {
            "title": "Modify a VoIP User’s Call Forwarding Always service settings Request",
            "description": "Modify a VoIP User’s Call Forwarding Always service settings Request",
            "allOf": [
                { "properties": {
                    "isActive": {
                        "title": "is Active",
                        "description": "Flag that specifies if the service is enabled.",
                        "type": "boolean"
                    },
                    "forwardToPhoneNumber": {
                        "$ref": "/base#/definitions/OutgoingDnOrSipUri"
                    },
                    "isRingSplashActive": {
                        "title": "is Ring Splash Active",
                        "description": "Play Ring Reminder when a call is forwarded.",
                        "type": "boolean"
                    }
                }}
            ]
        }

+ Response 204 (application/hal+json)

    + Headers
        Transaction-Id: 1380080943120
# Group VoIP User
Following resources belong to VoIP User entity.

## VoIP User [/loki/users/{+userId}]
Represents VoIP User resource.

### URI Template Parameters JSON Schema
    {
        "title": "VoIP User resource URI template parameters",
        "description": "VoIP User resource URI template parameters",
        "type": "object",
        "properties": {
            "userId": { "$ref": "/base#/definitions/UserId" }
        },
        "required": ["userId"]
    }


### Retrieve a VoIP User [GET]
Retrieve a VoIP User information.

+ Links
    + self - Self link.
    + collection - Site Users collection. Single. [/loki/customers/{+customerId}/sites/{+siteId}/users]
    + ls:customer - Customer resource. Single. [/loki/customers/{+customerId}]
    + ls:site - Site resource. Single. [/loki/customers/{+customerId}/sites/{+siteId}]
    + ls:user-device - User's Device. Single. Optional - not present when user does not have primary device. [/loki/customers/{+customerId}/sites/{+siteId}/devices/{+deviceId}]
    + ls:user-registrations - User�s registrations collection. Single. [/loki/users/{+userId}/registrations]
    + ls:user-services - User's services document. Single. [/loki/users/{+userId}/services]
    + ls:user-reInvite - User ReInvite controller. Single. [/loki/users/{+userId}/reInvite]
    + ls:user-swapDevice - Swap Device controller. Single. [/loki/users/{+userId}/swapDevice]
    + ls:user-resetDeviceCredentials - Reset Device Credentials controller. Single. [/loki/users/{+userId}/resetDeviceCredentials]

+ Embedded Resources
    + ls:user-device - Contains embedded representation of user's device. Not present if device is not assigned.

+ Request (application/json)

    + Headers
        Transaction-Id: 1380080943120


+ Response 200 (application/hal+json)

    + Headers
        Transaction-Id: 1380080943120

    + Body

        {
            "_links": {
                "self": {
                    "href": "http://example.com/loki/customers/DemoCustomer/sites/DemoSite/users/testuser@example.net"
                },
                "collection": {
                    "href": "http://example.com/loki/customers/DemoCustomer/sites/DemoSite/users"
                },
                "ls:customer": {
                    "href": "http://example.com/loki/customers/DemoCustomer"
                },
                "ls:site": {
                    "href": "http://example.com/loki/customers/DemoCustomer/sites/DemoSite"
                },
                "ls:user-device": {
                    "href": "http://example.com/loki/customers/DemoCustomer/sites/DemoSite/devices/DemoDevice"
                },
                "ls:user-services": {
                    "href": "http://example.com/loki/customers/DemoCustomer/sites/DemoSite/users/testuser@example.net/services"
                },
                "ls:user-registrations": {
                    "href": "http://example.com/loki/users/testuser@example.net/registrations"
                },
                "ls:user-reInvite": {
                    "href": "http://example.com/loki/users/testuser@example.net/reInvite"
                },
                "ls:user-swapDevice": {
                    "href": "http://example.com/loki/users/testuser@example.net/swapDevice"
                },
                "ls:user-resetDeviceCredentials": {
                    "href": "http://example.com/loki/users/testuser@example.net/resetDeviceCredentials"
                }
            },
            "_embedded": {
                "ls:user-device": {
                    "_links": {
                        "self": {
                            "href": "http://example.com/loki/customers/DemoCustomer/sites/DemoSite/devices/DemoDevice"
                        }
                    },
                    "deviceId": "DemoDevice",
                    "level": "Site",
                    "name": "DemoDevice",
                    "linePort": "testdevice@example.net",
                    "port": null,
                    "privateIdentity": null,
                    "contact": [],
                    "staticRegistrationCapable": true,
                    "useDomain": true,
                    "supportVisualDeviceManagement": false
                }
            },
            "customerId": "DemoCustomer",
            "siteId": "DemoSite",
            "userId": "testuser@example.net",
            "lastName": "Smith",
            "firstName": "John",
            "callingLineId": {
                "lastName": "Smith",
                "firstName": "John",
                "phoneNumber": "+1-4152223000"
            },
            "nameDialingName": {
                "lastName": "Smith",
                "firstName": "John"
            },
            "phoneNumber": "+1-4152223000",
            "extension": "3000",
            "department": {
                "type": "Site",
                "customerId": "DemoCustomer",
                "siteId": "DemoSite",
                "name": "Department"
            },
            "departmentFullPath": "Parent Department \\ Department",
            "language": "English",
            "timeZone": "GMT+00:00",
            "defaultAlias": "testuser@example.net",
            "alias": [
                "testuser_old@example.net",
                "testuser_me@example.net"
            ],
            "title": "Mr",
            "pagerPhoneNumber": null,
            "mobilePhoneNumber": "+1-7772223000",
            "emailAddress": "jsmith@example.com",
            "yahooId": null,
            "address": {
                "location": null,
                "line1": "Rose 100",
                "line2": null,
                "city": "Beverly Hills",
                "stateOrProvince": "CA",
                "zipOrPostalCode": "90210",
                "country": "United States"
            },
            "countryCode": "1",
            "nationalPrefix": null,
            "networkClassOfService": "NCOS",
            "officeZoneName": "North Branch",
            "primaryZoneName": null,
            "impId": null,
            "extensions": {
                "broadworks": {
                    "resourceId": "testuser@example.net"
                }
            }
        }

    + Schema

        {
            "title": "Retrieve VoIP User response",
            "description": "Retrieve VoIP User response",
            "allOf": [
                {
                    "$ref": "/base#/definitions/HalResponse"
                }, {
                    "required": ["_links", "_embedded"]
                }, {
                    "properties": {
                        "_embedded": {
                            "properties": {
                                "ls:user-device": {
                                    "allOf": [
                                        {
                                            "$ref": "/user#/definitions/UserDevice"
                                        }, {
                                            "required": [
                                                "deviceId", "level", "name", "linePort", "port", "contact",
                                                "staticRegistrationCapable", "useDomain", "_links"
                                            ]
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }, {
                    "$ref": "/user#/definitions/User"
                }, {
                    "required": [
                        "customerId", "siteId", "userId", "lastName", "firstName", "callingLineId", "nameDialingName",
                        "phoneNumber", "extension", "department", "departmentFullPath", "language", "timeZone", "defaultAlias",
                        "alias", "title", "pagerPhoneNumber", "mobilePhoneNumber", "emailAddress", "yahooId", "address",
                        "countryCode", "nationalPrefix", "networkClassOfService", "extensions"
                    ]
                }
            ]
        }


## VoIP User Registrations List [/loki/users/{+userId}/registrations]
Represents the Collection of VoIP User registrations.

### URI Template Parameters JSON Schema
    {
        "title": "VoIP User resource URI template parameters",
        "description": "VoIP User resource URI template parameters",
        "type": "object",
        "properties": {
            "userId": { "$ref": "/base#/definitions/UserId" }
        },
        "required": ["userId"]
    }
### Retrieve a VoIP User's Registrations List [GET /loki/users/{+userId}/registrations]
Retrieve a VoIP User's Registrations List.

+ Links
    + self
    + up - Link to User [GET /loki/users/{+userId}]

+ Embedded Resources
    + item

+ Parameters
    + userId - VoIP User ID

+ Request (application/json)

    + Headers
        Transaction-Id: 1380080943120

+ Response 200 (application/hal+json)

    + Headers
        Transaction-Id: 1380080943120

    + Body

        {
            "_links": {
                "self": {
                    "href": "http://loki.example.com/loki/users/exampleUserId%40example.com/registrations"
                },
                "up": {
                    "href": "http://loki.example.com/loki/users/exampleUserId%40example.com"
                }
            },
            "_embedded": {
                "item": [
                    {
                        "_links": {
                            "ls:registered-device": {
                                "href": "http://loki.example.com/loki/customers/ExampleCom/sites/ExampleCom/devices/example_btbc_pc"
                            }
                        },
                        "_embedded": {
                            "ls:registered-device": {
                                "_links": {
                                    "self": {
                                        "href": "http://loki.example.com/loki/customers/ExampleCom/sites/ExampleCom/devices/example_btbc_pc"
                                    }
                                },
                                "customerId": "ExampleCom",
                                "siteId": "ExampleCom",
                                "deviceId": " example_btbc_pc",
                                "name": " example_btbc_pc",
                                "level": "Site"
                            }
                        },
                        "userId": "exampleUserId@example.com",
                        "order": 1,
                        "uri": "sip:btbcpcexampleUserId-9k0bol85l7lvf@10.48.1.13:5060;transport=udp",
                        "expiration": "Wed Aug 12 03:17:30 EDT 2015",
                        "linePort": "btbcpcexampleUserId@example.com",
                        "endpointType": "Primary",
                        "publicNetAddress": "10.48.1.13",
                        "publicPort": "5060",
                        "privateNetAddress": "",
                        "privatePort": "",
                        "userAgent": "bc-uc - UC-One (21.2.0.443 Windows (160))",
                        "lockout": {
                            "started": "",
                            "expires": "",
                            "count": "0"
                        }
                    },
                    {
                        "_links": {
                            "ls:registered-device": {
                                "href": "http://loki.example.com/loki/customers/ExampleCom/devices/example_btbc_mac"
                            }
                        },
                        "_embedded": {
                            "ls:registered-device": {
                                "_links": {
                                    "self": {
                                        "href": "http://loki.example.com/loki/customers/ExampleCom/devices/example_btbc_mac"
                                    }
                                },
                                "customerId": "ExampleCom",
                                "deviceId": "example_btbc_mac",
                                "name": "example_btbc_mac",
                                "level": "Customer"
                            }
                        },
                        "userId": "exampleUserId@example.com",
                        "order": 2,
                        "uri": "sip:btbcmacexampleUserId-9k0bol85l7lvf@10.48.1.14:5060;transport=udp",
                        "expiration": "Wed Aug 12 03:17:30 EDT 2015",
                        "linePort": "btbcmacexampleUserId@example.com",
                        "endpointType": "Shared Call Appearance",
                        "publicNetAddress": "10.48.1.14",
                        "publicPort": "5060",
                        "privateNetAddress": "",
                        "privatePort": "",
                        "userAgent": "bc-uc - UC-One (21.2.0.443 Mac (160))",
                        "lockout": {
                            "started": "",
                            "expires": "",
                            "count": "0"
                        }
                    }
                ]
            }
        }

    + Schema

        {
            "title": "Retrieve VoIP User's Registrations response",
            "description": "Retrieve VoIP User's Registrations response",
            "allOf": [
                { "$ref": "/base#/definitions/HalResponse" },
                { "required": ["_links", "_embedded"] },
                { "properties": {
                    "_embedded": {
                        "properties": {
                            "item": {
                                "type": "array",
                                "items": {
                                    "allOf": [
                                        { "$ref": "/base#/definitions/HalResponse" },
                                        { "required": ["_links", "_embedded"] },
                                        { "properties": {
                                            "_embedded": {
                                                "properties": {
                                                    "ls:registered-device": {
                                                        "allOf": [
                                                            { "$ref": "/base#/definitions/HalResponse" },
                                                            { "required": ["_links"] },
                                                            { "$ref": "/user#/definitions/UserDevice" },
                                                            { "properties": {
                                                                "customerId": { "$ref": "/base#/definitions/CustomerId" },
                                                                "siteId": { "$ref" : "/base#/definitions/SiteId" },
                                                                "deviceId": { "$ref" : "/base#/definitions/DeviceId" }
                                                            } },
                                                            { "required": ["deviceId", "name", "level"] }
                                                        ]
                                                    }
                                                },
                                                "required": ["ls:registered-device"]
                                            },
                                            "userId": { "$ref" : "/base#/definitions/UserId" },
                                            "order": { "type": "integer" },
                                            "uri": { "type": "string" },
                                            "expiration": { "type": "string" },
                                            "linePort": { "type": "string", "minLength": 1, "maxLength": 161 },
                                            "endpointType": { "type": "string" },
                                            "publicNetAddress": { "type": "string" },
                                            "publicPort": { "type": "string" },
                                            "privateNetAddress": { "type": "string" },
                                            "privatePort": { "type": "string" },
                                            "userAgent": { "type": "string" },
                                            "lockout": {
                                                "type": "object",
                                                "properties": {
                                                    "started": { "type": "string" },
                                                    "expires": { "type": "string" },
                                                    "count": { "type": "string" }
                                                },
                                                "required": ["started", "expires", "count"]
                                            }
                                        } },
                                        { "required": ["userId", "order", "uri", "expiration", "linePort", "endpointType", "publicNetAddress", "publicPort", "privateNetAddress", "privatePort", "userAgent", "lockout"] }
                                    ]
                                }
                            }
                        },
                        "required": ["item"]
                    }
                } }
            ]
        }


# Group Footer
The End.